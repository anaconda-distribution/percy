schema_version: 1

context:

outputs:
  - name: libdb
    build:
    tests:
      script:
        - if: unix
          then: test -f ${PREFIX}/lib/libdb${SHLIB_EXT}
        - if: win
          then: if not exist %LIBRARY_BIN%\libdb%SHLIB_EXT%
      python:
        pip-check: false
    requirements:
      run_exports:
        - bar
  # metapackage for old anaconda name (only available on linux/mac)
  - name: db
    requirements:
      build:
        # compilers are to ensure that variants are captured
        - foo3
        - foo2
        - ${{ compiler('c') }}
        - ${{ compiler('cxx') }}
      run:
        - foo
    tests:
      script:
        - db_archive -m hello
      python:
        pip-check: false
